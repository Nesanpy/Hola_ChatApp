"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[409],{7409:(C,l,a)=>{a.r(l),a.d(l,{RegisterPage:()=>m});var u=a(467),d=a(177),c=a(4341),g=a(956),t=a(3953),p=a(9040);let h=(()=>{class i{constructor(e){this.dbInitService=e,this.dbInitService.initDb().then(()=>{if(this.db=this.dbInitService.getDatabase(),!this.db)throw new Error("La base de datos no est\xe1 inicializada.")})}addUser(e,r,o){var s=this;return(0,u.A)(function*(){s.db?.run("INSERT INTO usuario (usuario, correo, contrasenha) VALUES (?, ?, ?)",[e,r,o])})()}usuarioExiste(e){var r=this;return(0,u.A)(function*(){const s=r.db?.prepare("SELECT COUNT(*) AS count FROM usuario WHERE usuario = ?");if(!s)throw new Error("No se pudo preparar la consulta SQL.");try{const n=s.get([e]);return!(!n||"number"!=typeof n[0])&&n[0]>0}catch(n){throw console.error("Error al verificar la existencia del usuario:",n),new Error("Error al verificar la existencia del usuario.")}})()}static#t=this.\u0275fac=function(r){return new(r||i)(t.KVO(p.B))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const f=i=>({advertencia:i});let m=(()=>{class i{constructor(e){this.dbService=e,this.usuario="",this.correo="",this.contrasenha="",this.usuarioExistente=!1}ngOnInit(){}registrarUsuario(){var e=this;return(0,u.A)(function*(){try{(yield e.dbService.usuarioExiste(e.usuario))?(console.error("El usuario ingresado ya existe:",e.usuario),e.usuarioExistente=!0):(yield e.dbService.addUser(e.usuario,e.correo,e.contrasenha),console.log("Usuario registrado:",e.usuario))}catch(r){console.error("Error al insertar usuario:",r)}})()}onUsuarioChange(){this.usuarioExistente=!1}static#t=this.\u0275fac=function(r){return new(r||i)(t.rXU(h))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-register"]],standalone:!0,features:[t.aNF],decls:28,vars:8,consts:[[3,"fullscreen"],[1,"container"],[1,"content"],["src","assets/img/Logo.png","alt","logo",1,"logo"],[1,"input-element"],["type","text",3,"ngModelChange","ngModel"],[1,"text",3,"ngClass"],[1,"text"],[1,"register-button"],["shape","round",1,"boton",3,"click"],[1,"login-option"],["href","/login"]],template:function(r,o){1&r&&(t.j41(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"p"),t.EFF(4,"Hola"),t.k0s(),t.nrm(5,"img",3),t.k0s()(),t.j41(6,"div",4)(7,"div")(8,"ion-input",5),t.mxI("ngModelChange",function(n){return t.DH7(o.usuario,n)||(o.usuario=n),n}),t.bIt("ngModelChange",function(){return o.onUsuarioChange()}),t.k0s(),t.j41(9,"p",6),t.EFF(10),t.k0s()(),t.j41(11,"div")(12,"ion-input",5),t.mxI("ngModelChange",function(n){return t.DH7(o.correo,n)||(o.correo=n),n}),t.k0s(),t.j41(13,"p",7),t.EFF(14,"Correo Electr\xf3nico"),t.k0s()(),t.j41(15,"div")(16,"ion-input",5),t.mxI("ngModelChange",function(n){return t.DH7(o.contrasenha,n)||(o.contrasenha=n),n}),t.k0s(),t.j41(17,"p",7),t.EFF(18,"Contrase\xf1a"),t.k0s()()(),t.j41(19,"div",8)(20,"ion-button",9),t.bIt("click",function(){return o.registrarUsuario()}),t.j41(21,"p"),t.EFF(22,"Registrarse"),t.k0s()()(),t.j41(23,"div",10)(24,"p"),t.EFF(25,"\xbfYa ten\xe9s una cuenta? "),t.j41(26,"a",11),t.EFF(27,"Iniciar Sesi\xf3n"),t.k0s()()()()),2&r&&(t.Y8G("fullscreen",!0),t.R7$(8),t.R50("ngModel",o.usuario),t.R7$(),t.Y8G("ngClass",t.eq3(6,f,o.usuarioExistente)),t.R7$(),t.SpI(" ",o.usuarioExistente?"El usuario ya est\xe1 registrado":"Nombre de Usuario"," "),t.R7$(2),t.R50("ngModel",o.correo),t.R7$(4),t.R50("ngModel",o.contrasenha))},dependencies:[g.Jm,g.$w,g.W9,d.MD,d.YU,c.YN,c.BC,c.vS],styles:['@import"https://fonts.googleapis.com/css2?family=Yusei+Magic&display=swap";.container[_ngcontent-%COMP%]{display:flex;justify-content:center}.content[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:48px;color:#009951;margin-top:110px;margin-right:8px;margin-bottom:110px}.container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:38px;height:auto}.input-element[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-family:Yusei Magic,sans-serif;text-align:center;border-bottom:1.6px solid black;width:205px;margin-left:auto;margin-right:auto;--highlight-color: #009951}.text[_ngcontent-%COMP%]{font-weight:600;text-align:center;font-size:12px;color:#2c2c2c57;margin-top:3px}ion-button[_ngcontent-%COMP%]{color:#000;--background: #009951}.register-button[_ngcontent-%COMP%]{padding-top:177px;display:flex;justify-content:center}.register-button[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:165px;color:#000}.register-button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700;font-size:15px;text-transform:capitalize}.login-option[_ngcontent-%COMP%]{text-align:center;font-weight:600;font-size:12px;color:#2c2c2c57}.advertencia[_ngcontent-%COMP%]{color:#ff4c4c;font-weight:600;text-align:center;font-size:12px;margin-top:3px}']})}return i})()}}]);