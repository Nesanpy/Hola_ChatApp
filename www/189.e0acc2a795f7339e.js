"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[189],{4189:(Ce,W,b)=>{b.r(W),b.d(W,{ChatPage:()=>ue});var $=b(177),_=b(4341),H=b(3537),u=b(467);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var A=function(n){return n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE",n}(A||{});class T extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const Z=n=>{var e,t,r,o,i;const l=n.CapacitorCustomPlatform||null,a=n.Capacitor||{},h=a.Plugins=a.Plugins||{},c=n.CapacitorPlatforms,k=(null===(e=c?.currentPlatform)||void 0===e?void 0:e.getPlatform)||(()=>null!==l?l.name:(n=>{var e,t;return n?.androidBridge?"android":null!==(t=null===(e=n?.webkit)||void 0===e?void 0:e.messageHandlers)&&void 0!==t&&t.bridge?"ios":"web"})(n)),fe=(null===(t=c?.currentPlatform)||void 0===t?void 0:t.isNativePlatform)||(()=>"web"!==k()),he=(null===(r=c?.currentPlatform)||void 0===r?void 0:r.isPluginAvailable)||(d=>{const f=I.get(d);return!(!f?.platforms.has(k())&&!J(d))}),J=(null===(o=c?.currentPlatform)||void 0===o?void 0:o.getPluginHeader)||(d=>{var f;return null===(f=a.PluginHeaders)||void 0===f?void 0:f.find(j=>j.name===d)}),I=new Map,Pe=(null===(i=c?.currentPlatform)||void 0===i?void 0:i.registerPlugin)||((d,f={})=>{const j=I.get(d);if(j)return console.warn(`Capacitor plugin "${d}" already registered. Cannot register plugins twice.`),j.proxy;const x=k(),L=J(d);let P;const ye=function(){var g=(0,u.A)(function*(){return!P&&x in f?P=P="function"==typeof f[x]?yield f[x]():f[x]:null!==l&&!P&&"web"in f&&(P=P="function"==typeof f.web?yield f.web():f.web),P});return function(){return g.apply(this,arguments)}}(),R=g=>{let p;const v=(...y)=>{const w=ye().then(m=>{const C=((g,p)=>{var v,y;if(!L){if(g)return null===(y=g[p])||void 0===y?void 0:y.bind(g);throw new T(`"${d}" plugin is not implemented on ${x}`,A.Unimplemented)}{const w=L?.methods.find(m=>p===m.name);if(w)return"promise"===w.rtype?m=>a.nativePromise(d,p.toString(),m):(m,C)=>a.nativeCallback(d,p.toString(),m,C);if(g)return null===(v=g[p])||void 0===v?void 0:v.bind(g)}})(m,g);if(C){const M=C(...y);return p=M?.remove,M}throw new T(`"${d}.${g}()" is not implemented on ${x}`,A.Unimplemented)});return"addListener"===g&&(w.remove=(0,u.A)(function*(){return p()})),w};return v.toString=()=>`${g.toString()}() { [capacitor code] }`,Object.defineProperty(v,"name",{value:g,writable:!1,configurable:!1}),v},Y=R("addListener"),K=R("removeListener"),xe=(g,p)=>{const v=Y({eventName:g},p),y=function(){var m=(0,u.A)(function*(){const C=yield v;K({eventName:g,callbackId:C},p)});return function(){return m.apply(this,arguments)}}(),w=new Promise(m=>v.then(()=>m({remove:y})));return w.remove=(0,u.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield y()}),w},S=new Proxy({},{get(g,p){switch(p){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return L?xe:Y;case"removeListener":return K;default:return R(p)}}});return h[d]=S,I.set(d,{name:d,proxy:S,platforms:new Set([...Object.keys(f),...L?[x]:[]])}),S});return a.convertFileSrc||(a.convertFileSrc=d=>d),a.getPlatform=k,a.handleError=d=>n.console.error(d),a.isNativePlatform=fe,a.isPluginAvailable=he,a.pluginMethodNoop=(d,f,j)=>Promise.reject(`${j} does not have an implementation of "${f}".`),a.registerPlugin=Pe,a.Exception=T,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},E=(n=>n.Capacitor=Z(n))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),U=E.registerPlugin;class B{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){var r=this;let o=!1;this.listeners[e]||(this.listeners[e]=[],o=!0),this.listeners[e].push(t);const l=this.windowListeners[e];l&&!l.registered&&this.addWindowListener(l),o&&this.sendRetainedArgumentsForEvent(e);const a=function(){var c=(0,u.A)(function*(){return r.removeListener(e,t)});return function(){return c.apply(this,arguments)}}();return Promise.resolve({remove:a})}removeAllListeners(){var e=this;return(0,u.A)(function*(){e.listeners={};for(const t in e.windowListeners)e.removeWindowListener(e.windowListeners[t]);e.windowListeners={}})()}notifyListeners(e,t,r){const o=this.listeners[e];if(o)o.forEach(i=>i(t));else if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(t),this.retainedEventArguments[e]=i}}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new E.Exception(e,A.Unimplemented)}unavailable(e="not available"){return new E.Exception(e,A.Unavailable)}removeListener(e,t){var r=this;return(0,u.A)(function*(){const o=r.listeners[e];if(!o)return;const i=o.indexOf(t);r.listeners[e].splice(i,1),r.listeners[e].length||r.removeWindowListener(r.windowListeners[e])})()}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(r=>{this.notifyListeners(e,r)}))}}const V=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),z=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class N extends B{getCookies(){return(0,u.A)(function*(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[o,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=z(o).trim(),i=z(i).trim(),t[o]=i}),t})()}setCookie(e){return(0,u.A)(function*(){try{const t=V(e.key),r=V(e.value),o=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),l=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${o}; path=${i}; ${l};`}catch(t){return Promise.reject(t)}})()}deleteCookie(e){return(0,u.A)(function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}})()}clearCookies(){return(0,u.A)(function*(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})()}clearAllCookies(){var e=this;return(0,u.A)(function*(){try{yield e.clearCookies()}catch(t){return Promise.reject(t)}})()}}U("CapacitorCookies",{web:()=>new N});const ee=function(){var n=(0,u.A)(function*(e){return new Promise((t,r)=>{const o=new FileReader;o.onload=()=>{const i=o.result;t(i.indexOf(",")>=0?i.split(",")[1]:i)},o.onerror=i=>r(i),o.readAsDataURL(e)})});return function(t){return n.apply(this,arguments)}}();class ie extends B{request(e){return(0,u.A)(function*(){const t=((n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),o=((n={})=>{const e=Object.keys(n);return Object.keys(n).map(o=>o.toLocaleLowerCase()).reduce((o,i,l)=>(o[i]=n[e[l]],o),{})})(n.headers)["content-type"]||"";if("string"==typeof n.data)t.body=n.data;else if(o.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[l,a]of Object.entries(n.data||{}))i.set(l,a);t.body=i.toString()}else if(o.includes("multipart/form-data")||n.data instanceof FormData){const i=new FormData;if(n.data instanceof FormData)n.data.forEach((a,h)=>{i.append(h,a)});else for(const a of Object.keys(n.data))i.append(a,n.data[a]);t.body=i;const l=new Headers(t.headers);l.delete("content-type"),t.headers=l}else(o.includes("application/json")||"object"==typeof n.data)&&(t.body=JSON.stringify(n.data));return t})(e,e.webFetchExtra),r=((n,e=!0)=>n?Object.entries(n).reduce((r,o)=>{const[i,l]=o;let a,h;return Array.isArray(l)?(h="",l.forEach(c=>{a=e?encodeURIComponent(c):c,h+=`${i}=${a}&`}),h.slice(0,-1)):(a=e?encodeURIComponent(l):l,h=`${i}=${a}`),`${r}&${h}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),o=r?`${e.url}?${r}`:e.url,i=yield fetch(o,t),l=i.headers.get("content-type")||"";let h,c,{responseType:a="text"}=i.ok?e:{};switch(l.includes("application/json")&&(a="json"),a){case"arraybuffer":case"blob":c=yield i.blob(),h=yield ee(c);break;case"json":h=yield i.json();break;default:h=yield i.text()}const O={};return i.headers.forEach((k,F)=>{O[F]=k}),{data:h,headers:O,status:i.status,url:i.url}})()}get(e){var t=this;return(0,u.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"GET"}))})()}post(e){var t=this;return(0,u.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"POST"}))})()}put(e){var t=this;return(0,u.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"PUT"}))})()}patch(e){var t=this;return(0,u.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})()}delete(e){var t=this;return(0,u.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})()}}U("CapacitorHttp",{web:()=>new ie});const D=U("Keyboard");var s=b(3953),ae=b(8880),le=b(9495);function ce(n,e){if(1&n&&(s.j41(0,"div",16)(1,"p"),s.EFF(2),s.k0s()()),2&n){const t=e.$implicit;s.R7$(2),s.JRh(t.mensaje)}}function de(n,e){if(1&n&&(s.qex(0),s.DNE(1,ce,3,1,"div",15),s.bVm()),2&n){const t=e.ngIf;s.R7$(),s.Y8G("ngForOf",t)}}let ue=(()=>{class n{constructor(t,r){this.platform=t,this.firestoreService=r,this.chatTitle="Chat Grupal",this.keyboardVisible=!1,this.mensaje=""}ngOnInit(){const t=localStorage.getItem("chatTitle");t&&(this.chatTitle=t),this.mensajes$=this.firestoreService.getMessages(this.chatTitle),this.platform.is("hybrid")&&(D.addListener("keyboardDidShow",r=>{this.keyboardVisible=!0,document.body.style.setProperty("--keyboard-offset",`${r.keyboardHeight}px`)}),D.addListener("keyboardDidHide",()=>{this.keyboardVisible=!1,document.body.style.setProperty("--keyboard-offset","0px")}))}ngOnDestroy(){this.platform.is("hybrid")&&D.removeAllListeners()}sendMessage(){this.mensaje.trim()&&this.firestoreService.sendMessage(this.chatTitle,this.mensaje).then(()=>{this.mensaje=""}).catch(t=>{console.error("Error al enviar el mensaje:",t)})}static#e=this.\u0275fac=function(r){return new(r||n)(s.rXU(ae.OD),s.rXU(le.B))};static#t=this.\u0275cmp=s.VBU({type:n,selectors:[["app-chat"]],standalone:!0,features:[s.aNF],decls:17,vars:6,consts:[[3,"fullscreen"],[1,"chat-header"],[1,"rectangulo"],[1,"triangulo"],[1,"encabezado"],["href","/chat-rooms"],["src","assets/img/back.png","alt","back",1,"back"],["src","assets/img/Logotipo.png","alt","logo",1,"logo"],[1,"mensajes"],[4,"ngIf"],[1,"input"],[1,"input-chat"],["placeholder","Escribe un mensaje...",3,"ngModelChange","ngModel"],[3,"click"],["src","assets/img/send.png","alt","send",1,"send"],["class","mensaje",4,"ngFor","ngForOf"],[1,"mensaje"]],template:function(r,o){1&r&&(s.j41(0,"ion-content",0)(1,"div",1),s.nrm(2,"div",2)(3,"div",3),s.j41(4,"p",4),s.EFF(5),s.k0s(),s.j41(6,"a",5),s.nrm(7,"img",6),s.k0s(),s.nrm(8,"img",7),s.k0s(),s.j41(9,"div",8),s.DNE(10,de,2,1,"ng-container",9),s.nI1(11,"async"),s.k0s(),s.j41(12,"div",10)(13,"div",11)(14,"ion-input",12),s.mxI("ngModelChange",function(l){return s.DH7(o.mensaje,l)||(o.mensaje=l),l}),s.k0s()(),s.j41(15,"a",13),s.bIt("click",function(){return o.sendMessage()}),s.nrm(16,"img",14),s.k0s()()()),2&r&&(s.Y8G("fullscreen",!0),s.R7$(5),s.JRh(o.chatTitle),s.R7$(5),s.Y8G("ngIf",s.bMT(11,4,o.mensajes$)),s.R7$(4),s.R50("ngModel",o.mensaje))},dependencies:[H.$w,H.W9,$.MD,$.Sq,$.bT,$.Jj,_.YN,_.BC,_.vS],styles:['.chat-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:fixed;top:0;left:0;width:100%;z-index:10}.rectangulo[_ngcontent-%COMP%]{width:100%;height:81px;background:#dff5e3;border-bottom-right-radius:30px;position:absolute;top:0}.triangulo[_ngcontent-%COMP%]{width:0;height:0;border-left:35px solid #DFF5E3;border-bottom:25px solid transparent;position:absolute;top:81px}.back[_ngcontent-%COMP%]{width:24px;height:auto;position:absolute;top:40px;left:25px;z-index:3}.encabezado[_ngcontent-%COMP%]{margin:0;padding:0;font-size:15px;color:#000;text-align:center;z-index:3;position:relative;top:41px}.logo[_ngcontent-%COMP%]{width:20%;max-width:70px;height:auto;position:absolute;top:35px;right:25px}.mensajes[_ngcontent-%COMP%]{font-size:14px;height:80%;padding:90px 20px 20px;display:flex;flex-direction:column;align-items:flex-end}.mensaje[_ngcontent-%COMP%]{position:relative;max-height:42px;background:#dff5e3;border-radius:10px 10px 0/10px 10px 0px;padding-left:15px;padding-right:15px;margin:10px 0;display:inline-block;text-align:right}.mensaje[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-8px;right:-2.4px;border-left:11px solid transparent;border-right:11px solid transparent;border-top:17px solid #DFF5E3;transform:rotate(90deg)}.input[_ngcontent-%COMP%]{background:#dff5e3;height:48px;position:fixed;bottom:var(--keyboard-offset, 0);left:0;width:100%;display:flex;align-items:center;transition:bottom .3s}.input-chat[_ngcontent-%COMP%]{background:#fff;height:32px;right:20px;width:100%;display:flex;align-items:center;flex-grow:1;margin-left:20px;margin-right:10px;border-radius:10px}.input-chat[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{margin-left:20px;margin-right:20px;height:100%;width:100%;--highlight-height: 0px;--highlight-color: #009951;font-family:Yusei Magic,sans-serif}.send[_ngcontent-%COMP%]{z-index:3;padding-top:5px;height:25px;width:auto;margin-right:20px;transform:rotate(45deg)}']})}return n})()}}]);